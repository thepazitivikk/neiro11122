<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>–ü–û–ü–£–¢–ò - –ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –æ—Ç 30 –º–∏–Ω—É—Ç - –ó–∞–∫–∞–∑–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã –Ω–∞ –¥–æ–º —Å –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
      /* –í–∞—à–∏ —Å—Ç–∏–ª–∏ —Ç—É—Ç */
      .profile-menu-dropdown {
        position: absolute; right: 0; top: 40px;
        background: white; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        padding: 10px; min-width: 180px; font-size: 14px; user-select: none;
        display: none;
        z-index: 1001;
      }
      .profile-menu-dropdown .menu-item {
        cursor: pointer; padding: 8px 10px; border-radius: 6px;
      }
      .profile-menu-dropdown .menu-item:hover {
        background-color: #f0f2f7;
      }
      .profile-avatar {
        width: 28px; height: 28px; border-radius: 50%; vertical-align: middle;
        margin-right: 8px;
      }
      .nav-link.profile-link {
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        position: relative;
        color: inherit;
        text-decoration: none;
      }
    </style>
</head>
<body>
<header class="header">
    <div class="container">
        <div class="header-content">
            <div class="logo">
                <h1 class="logo-text">–ø–æ–ü—É—Ç–∏</h1>
            </div>
            <div class="search-bar">
                <input type="text" placeholder="–ù–∞–π—Ç–∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω –∏–ª–∏ –±–ª—é–¥–æ...">
                <button class="search-btn">–ù–∞–π—Ç–∏</button>
            </div>
<nav class="nav">
    {% if session.user %}
    <!-- –ë–ª–æ–∫ –¥–ª—è –ê–í–¢–û–†–ò–ó–û–í–ê–ù–ù–û–ì–û –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div class="nav-link profile-link" id="profileLinkAuth">
        {% if session.user.avatar_url %}
        <img src="{{ session.user.avatar_url }}" alt="–ê–≤–∞—Ç–∞—Ä" class="profile-avatar">
        {% else %}
        <div class="profile-avatar-default">
            {{ session.user.first_name[0] if session.user.first_name else '–ü' }}
        </div>
        {% endif %}
<span id="profileText">
    {{ session.user.first_name or session.user.display_name or session.user.login or '–ü—Ä–æ—Ñ–∏–ª—å' }}
</span>

        <!-- –ú–µ–Ω—é –ø—Ä–æ—Ñ–∏–ª—è -->
        <div id="profileMenu" class="profile-menu-dropdown">
            <div class="menu-item" onclick="window.location.href='/user/profile'">
                <i class="fas fa-user" style="margin-right: 8px;"></i>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
            </div>
            <div class="menu-item" onclick="window.location.href='/user/orders'">
                <i class="fas fa-shopping-bag" style="margin-right: 8px;"></i>–ú–æ–∏ –∑–∞–∫–∞–∑—ã
            </div>
            <div class="menu-item" onclick="window.location.href='/user/favorites'">
                <i class="fas fa-heart" style="margin-right: 8px;"></i>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ
            </div>
            <div class="menu-divider"></div>
            <div class="menu-item" onclick="logout()" style="color: #ff4444;">
                <i class="fas fa-sign-out-alt" style="margin-right: 8px;"></i>–í—ã–π—Ç–∏
            </div>
        </div>
    </div>
    {% else %}
    <!-- –ë–ª–æ–∫ –¥–ª—è –ù–ï–ê–í–¢–û–†–ò–ó–û–í–ê–ù–ù–û–ì–û –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <a href="#" class="nav-link profile-link" id="profileLinkNotAuth">
        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
        </svg>
        <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
    </a>
    {% endif %}

    <a href="#" class="nav-link cart-link">
        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="9" cy="21" r="1"></circle>
            <circle cx="20" cy="21" r="1"></circle>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
    </a>
</nav>
        </div>
    </div>
</header>


<section class="promo-banner-section">
    <div class="container">
        <div class="banner-container">
            <!-- –ó–∞—â–∏—Ç–Ω—ã–π overlay -->
            <div class="banner-protection-overlay"></div>

            <div class="banner-wrapper">
                {% for banner in banners %}
                <div class="banner-slide {% if loop.first %}active{% endif %}"
                     data-banner-id="{{ banner.id }}"
                     style="background-color: {{ banner.background_color }};">
                    {% if banner.text_button %}
                    <div class="banner-content">
                        <h2 class="banner-title">{{ banner.title }}</h2>
                        <p class="banner-description">{{ banner.description | replace('\n', '<br>') | safe }}</p>
                        <!-- –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º -->
                        <a href="{{ banner.link }}" class="banner-link">
                            {{ banner.button_text if banner.button_text else "–£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ" }}
                        </a>
                    </div>
                    {% endif %}

                    <div class="banner-media {% if not banner.text_button %}full-width{% endif %}">
                        {% if banner.type == 'video' %}
                        <!-- –í–∏–¥–µ–æ –±–∞–Ω–Ω–µ—Ä -->
                        <video class="banner-video" autoplay muted loop playsinline>
                            <source src="{{ banner.video_url }}" type="video/mp4">
                            –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
                        </video>
                        {% elif banner.type == 'gif' %}
                        <!-- GIF –±–∞–Ω–Ω–µ—Ä -->
                        <img src="{{ banner.gif_url }}" alt="{{ banner.title }}" class="banner-gif">
                        {% else %}
                        <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–Ω–Ω–µ—Ä (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
                        <img src="{{ banner.image_url }}" alt="{{ banner.title }}" class="banner-real-image">
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>

            <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã -->
            <div class="banner-indicators">
                {% for banner in banners %}
                <span class="indicator {% if loop.first %}active{% endif %}"
                      onclick="goToBanner({{ loop.index0 }})"></span>
                {% endfor %}
            </div>
        </div>
    </div>
</section>

    <!-- Categories -->
    <section class="categories">
        <div class="container">
            <h2 class="section-title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
            <div class="categories-grid">
                {% for category in categories %}
                <div class="category-card">
                    <!-- Use the image URL from JSON -->
                    <img src="{{ category.image_url }}" alt="{{ category.name }}" class="category-icon">
                    <span class="category-name">{{ category.name }}</span>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

<!-- –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –≤ –≤–∞—à index.html —Ç–∞–º, –≥–¥–µ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –º–∞–≥–∞–∑–∏–Ω—ã -->

<section class="stores-section">
    <div class="container">
        <h2 class="section-title">–í—Å–µ –º–∞–≥–∞–∑–∏–Ω—ã</h2>

        {% if stores_by_category %}
            {% for category, stores in stores_by_category.items() %}
                {% if stores %}
                <div class="category-section">
                    <h3 class="category-title">{{ category }}</h3>
                    <div class="stores-grid">
                        {% for store in stores %}
                        <div class="store-card" data-category="{{ store.category }}">
                            <div class="store-image-container">
                                <img src="{{ store.image_url }}" alt="{{ store.name }}" class="store-image"
                                     onerror="this.src='/static/images/default-store.jpg'">
                            </div>

                            <div class="store-info">
                                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ä–µ–π—Ç–∏–Ω–≥ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ -->
                                <div class="store-header">
                                    <h3 class="store-name">{{ store.name }}</h3>
                                    <div class="store-rating">
                                        <div class="rating-with-star">
                                            <span class="star-icon"></span>
                                            <span>{{ store.rating }}</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π -->
                                <div class="store-delivery-time">
                                    <span>{{ store.delivery_time }}</span>
                                    <span class="delivery-info-icon" title="–ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏">( i )</span>
                                </div>

                                <!-- –¢–ï–ì–ò –≤–º–µ—Å—Ç–æ –¥–µ—Ç–∞–ª–µ–π –∑–∞–∫–∞–∑–∞ -->
                                {% if store.tags and store.tags|length > 0 %}
                                <div class="store-tags">
                                    {% for tag in store.tags[:3] %}  <!-- –ú–∞–∫—Å–∏–º—É–º 3 —Ç–µ–≥–∞ -->
                                    <span class="store-tag {{ tag.color }}">{{ tag.text }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            {% endfor %}
        {% else %}
        <div class="stores-empty">
            <div class="stores-empty-icon">üè™</div>
            <h3>–ú–∞–≥–∞–∑–∏–Ω–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h3>
            <p>–°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</p>
        </div>
        {% endif %}
    </div>
</section>

<div id="authModal" class="auth-modal">
    <div class="auth-modal-content tall-modal">
        <button class="auth-modal-close">&times;</button>

<h2 class="auth-modal-title">–ü–æ—Ö–æ–¥—É –º—ã –Ω–µ –∑–Ω–∞–∫–æ–º—ã
  <img src="/static/images/gryst.png" alt="–õ–æ–≥–æ" class="auth-modal-logo">
</h2>
        <p class="auth-modal-subtitle">–î–∞–≤–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–∏–º —ç—Ç–æ :D</p>

<button class="yandex-auth-btn" onclick="loginWithYandex()">
  <img src="/static/images/ya.png" alt="–õ–æ–≥–æ –Ø–Ω–¥–µ–∫—Å" class="yandex-btn-logo">
  –í–æ–π—Ç–∏ –ø–æ –Ø–Ω–¥–µ–∫—Å ID
</button>



        <!-- –¢–µ–∫—Å—Ç —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ —á–µ–∫–±–æ–∫—Å–æ–≤ -->
        <p class="auth-agreement-text">
            –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—è—Å—å –Ω–∞ –Ω–∞—à–µ–º —Å–µ—Ä–≤–∏—Å–µ, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å <a href="#" target="_blank">—É—Å–ª–æ–≤–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a> –∏ <a href="#" target="_blank">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>.
        </p>

        <!-- –£–ë–ò–†–ê–ï–ú —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –∏ –∫–Ω–æ–ø–∫—É –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å -->
    </div>
</div>


<footer class="footer">
    <div class="footer-container">
        <!-- –õ–æ–≥–æ—Ç–∏–ø –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É -->
        <div class="footer-logo">
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="–ø–æ–ü—É—Ç–∏">
        </div>

        <!-- –°–æ—Ü—Å–µ—Ç–∏ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É -->
        <div class="footer-social">
            <a href="#" aria-label="–í–ö–æ–Ω—Ç–∞–∫—Ç–µ"><i class="fab fa-vk"></i></a>
            <a href="#" aria-label="Telegram"><i class="fab fa-telegram"></i></a>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –≤ 3 –∫–æ–ª–æ–Ω–∫–∏ -->
        <div class="footer-links">
            <div class="link-column">
                <a href="#" class="footer-link">–û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã</a>
                <a href="#" class="footer-link">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
                <a href="#" class="footer-link">–†–∞–±–æ—Ç–∞ –≤ –ü–æ–ø—É—Ç–∏</a>
            </div>
            <div class="link-column">
                <a href="#" class="footer-link">–£–º–Ω—ã–π –∏–º–ø–æ—Ä—Ç</a>
                <a href="#" class="footer-link">–°—Ç–∞—Ç—å –∫—É—Ä—å–µ—Ä–æ–º-–ø–∞—Ä—Ç–Ω—ë—Ä–æ–º</a>
                <a href="#" class="footer-link">–õ–∏–Ω–∏—è –¥–æ–≤–µ—Ä–∏—è –ü–æ–ü—É—Ç–∏</a>
            </div>
            <div class="link-column">
                <a href="#" class="footer-link">–ü—Ä–∞–≤–∏–ª–∞ –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è</a>
                <a href="#" class="footer-link">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
            </div>
        </div>

        <!-- –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="footer-legal">
            <p class="legal-text">
                –ó–æ–Ω–∞, –≤—Ä–µ–º—è, —Ç–æ–≤–∞—Ä—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã. –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä, –ø—Ä–æ–¥–∞–≤–µ—Ü –û–û–û ¬´–°–æ–Ω –ö–æ—Ç–æ—Ä—ã–µ –†–∞–±–æ—Ç–∞–µ—Ç - –°–û–ù–í–û–†–ö¬ª –û–ì–†–ù 1177847261602, 121087, –ú–æ—Å–∫–≤–∞, –≤–Ω.–≥.—Ç–µ—Ä. –º—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω—ã–π –æ–∫—Ä—É–≥ –§–∏–ª—ë–≤—Å–∫–∏–π –ø–∞—Ä–∫, —É–ª. –ë–∞—Ä–∫–ª–∞—è, –¥. 6, —Å—Ç—Ä. 3, –ø–æ–º–µ—â. 8–ù/4. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏ –æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –û–û–û ¬´–£–º–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ¬ª –û–ì–†–ù 1137847232852, 121087, –ú–æ—Å–∫–≤–∞, –≤–Ω.–≥.—Ç–µ—Ä. –º—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω—ã–π –æ–∫—Ä—É–≥ –§–∏–ª—ë–≤—Å–∫–∏–π –ø–∞—Ä–∫, —É–ª. –ë–∞—Ä–∫–ª–∞—è, –¥. 6, —Å—Ç—Ä. 3, –ø–æ–º–µ—â. 8–ù/4
            </p>
        </div>
    </div>
</footer>

<script>
// ============================================
// –ü–û–õ–ù–´–ô –ë–õ–û–ö –°–ö–†–ò–ü–¢–û–í –î–õ–Ø INDEX.HTML
// ============================================

// === –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ===
let currentBannerIndex = 0;
let bannerInterval;
const bannerSlides = document.querySelectorAll('.banner-slide');
const totalBanners = bannerSlides.length;

// === –§–£–ù–ö–¶–ò–ò –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò ===
function logout() {
    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?')) {
        window.location.href = '/auth/logout';
    }
}

function loginWithYandex() {
    window.location.href = '/auth/yandex';
}

// === –§–£–ù–ö–¶–ò–ò –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê ===
function openAuthModal() {
    const authModal = document.getElementById('authModal');
    if (authModal) {
        authModal.style.display = 'flex';
        document.body.classList.add('modal-open');
        setTimeout(() => authModal.classList.add('active'), 10);
    }
}

function closeAuthModal() {
    const authModal = document.getElementById('authModal');
    if (authModal) {
        authModal.classList.remove('active');
        setTimeout(() => {
            authModal.style.display = 'none';
            document.body.classList.remove('modal-open');
        }, 300);
    }
}

// === –§–£–ù–ö–¶–ò–ò –ë–ê–ù–ù–ï–†–û–í ===
function goToBanner(index) {
    stopCurrentMedia();
    bannerSlides[currentBannerIndex].classList.remove('active');
    currentBannerIndex = index;
    bannerSlides[currentBannerIndex].classList.add('active');
    playCurrentMedia();
    updateIndicators();
    resetInterval();
}

function stopCurrentMedia() {
    const currentSlide = bannerSlides[currentBannerIndex];
    const video = currentSlide.querySelector('.banner-video');
    if (video) {
        video.pause();
        video.currentTime = 0;
    }
}

function playCurrentMedia() {
    const currentSlide = bannerSlides[currentBannerIndex];
    const video = currentSlide.querySelector('.banner-video');
    if (video) {
        video.play().catch(e => console.log('–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:', e));
    }
}

function updateIndicators() {
    document.querySelectorAll('.indicator').forEach((indicator, index) => {
        indicator.classList.toggle('active', index === currentBannerIndex);
    });
}

function resetInterval() {
    clearInterval(bannerInterval);
    bannerInterval = setInterval(() => {
        goToBanner((currentBannerIndex + 1) % totalBanners);
    }, 10000);
}

// === –§–£–ù–ö–¶–ò–Ø –ü–†–û–í–ï–†–ö–ò –£–í–ï–î–û–ú–õ–ï–ù–ò–ô ===
function checkForNotification() {
    fetch('/get_notification')
        .then(response => response.json())
        .then(data => {
            console.log("üîî –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:", data);

            if (data.show && "Notification" in window && Notification.permission === "granted") {
                const icon = data.icon || 'üéÅ';
                const title = `${icon} ${data.title || '–ø–æ–ø—É—Ç–∏'}`;

                const notification = new Notification(title, {
                    body: data.message,
                    icon: '/static/logo.png',
                    badge: '/static/logo.png',
                    tag: data.type || 'general'
                });

                notification.onclick = function() {
                    window.focus();
                    this.close();
                };

                setTimeout(() => {
                    notification.close();
                }, 7000);
            }
        })
        .catch(error => console.error('‚ùå –û—à–∏–±–∫–∞:', error));
}

// === –ì–õ–ê–í–ù–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
document.addEventListener('DOMContentLoaded', function() {
    console.log('üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...');

    // === –ü–†–û–§–ò–õ–¨ –ê–í–¢–û–†–ò–ó–û–í–ê–ù–ù–û–ì–û –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø ===
    const profileLinkAuth = document.getElementById('profileLinkAuth');
    const profileMenu = document.getElementById('profileMenu');

    if (profileLinkAuth && profileMenu) {
        console.log('‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ê–í–¢–û–†–ò–ó–û–í–ê–ù');

        profileLinkAuth.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();

            console.log('üñ±Ô∏è –ö–ª–∏–∫ –ø–æ –ø—Ä–æ—Ñ–∏–ª—é!');

            if (profileMenu.style.display === 'block') {
                profileMenu.style.display = 'none';
                console.log('‚ùå –ó–∞–∫—Ä—ã–ª–∏ –º–µ–Ω—é');
            } else {
                profileMenu.style.display = 'block';
                console.log('‚úÖ –û—Ç–∫—Ä—ã–ª–∏ –º–µ–Ω—é');
            }
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ
        document.addEventListener('click', function(e) {
            if (!profileLinkAuth.contains(e.target) && !profileMenu.contains(e.target)) {
                profileMenu.style.display = 'none';
            }
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                profileMenu.style.display = 'none';
            }
        });

        // –ü–ª–∞–≤–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
        let scrollTimeout;
        window.addEventListener('scroll', function() {
            if (profileMenu.style.display === 'block') {
                // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
                profileMenu.style.opacity = '0';
                profileMenu.style.transform = 'translateY(-10px)';

                // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–∞—É—Ç
                clearTimeout(scrollTimeout);

                // –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 200–º—Å (–≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏)
                scrollTimeout = setTimeout(() => {
                    profileMenu.style.display = 'none';
                    profileMenu.style.opacity = '1';
                    profileMenu.style.transform = 'translateY(0)';
                }, 200);

                console.log('üìú –ú–µ–Ω—é –∑–∞–∫—Ä—ã—Ç–æ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ');
            }
        });
    }

    // === –ü–†–û–§–ò–õ–¨ –ù–ï–ê–í–¢–û–†–ò–ó–û–í–ê–ù–ù–û–ì–û –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø ===
    const profileLinkNotAuth = document.getElementById('profileLinkNotAuth');
    if (profileLinkNotAuth) {
        console.log('‚ÑπÔ∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω');

        profileLinkNotAuth.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('üñ±Ô∏è –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏');
            openAuthModal();
        });
    }

    // === –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û ===
    const authModal = document.getElementById('authModal');
    const authModalClose = document.querySelector('.auth-modal-close');

    if (authModalClose) {
        authModalClose.addEventListener('click', closeAuthModal);
    }

    if (authModal) {
        authModal.addEventListener('click', function(e) {
            if (e.target === authModal) closeAuthModal();
        });
    }

    // === –ë–ê–ù–ù–ï–†–´ ===
    const bannerContainer = document.querySelector('.banner-container');
    if (bannerContainer) {
        bannerContainer.addEventListener('contextmenu', e => e.preventDefault());
        bannerContainer.addEventListener('dragstart', e => e.preventDefault());
        bannerContainer.addEventListener('selectstart', e => e.preventDefault());

        resetInterval();
        playCurrentMedia();

        bannerContainer.addEventListener('mouseenter', () => {
            clearInterval(bannerInterval);
            const video = bannerSlides[currentBannerIndex].querySelector('.banner-video');
            if (video) video.pause();
        });

        bannerContainer.addEventListener('mouseleave', () => {
            resetInterval();
            const video = bannerSlides[currentBannerIndex].querySelector('.banner-video');
            if (video) video.play().catch(e => console.log('–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ'));
        });
    }

    // === –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ===
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
    // setTimeout(() => {
    //     if ("Notification" in window && Notification.permission === "default") {
    //         Notification.requestPermission();
    //     }
    // }, 3000);

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    setInterval(checkForNotification, 60000); // –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
    setTimeout(checkForNotification, 2000);   // –ü–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã

    console.log('‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!');
});
</script>


</body>
</html>